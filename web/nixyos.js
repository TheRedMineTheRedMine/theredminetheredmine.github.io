const body = `<div class="webhook"><h1 class="title">Webhook</h1><form class="container d-flex column"><details id="content" class="d-flex column"><summary class="d-flex row align-center space-between"><h2 class="title">Contenu</h2><span class="carret col-center"><span></span></span></summary><div class="content"><div class="input" id="message"><label for="message">Message :</label><textarea name="message" id="message" placeholder="Contenu du message">Test ðŸ‘€</textarea></div></div></details><details id="embeds" class="d-flex column" open><summary class="d-flex row align-center space-between"><h2 class="title">Embeds</h2><span class="carret col-center"><span></span></span></summary><div class="content"><ul class="embeds"><li><div class="summary d-flex space-between"><div class="title d-flex"><span class="carret col-center"><span></span></span><h3>Embed 1 - Premier embed</h3></div><div class="remove"><img src="./assets/images/bin.png" alt="Remove"></div></div><div class="fields"><!--  --></div></li></ul><button type="button">Ajouter un embed</button></div></details></form></div><div class="preview d-flex row"><div class="avatar"><img alt="Discord"></div><div class="message"><div class="user"><span class="username">TheRed</span><span class="date"></span></div><div class="content"><div class="message"></div><div class="embeds"></div></div></div></div>`;const css = `* {padding: 0;margin: 0;box-sizing: border-box;outline: none} :root {--white: #fff;--white-2: #eee;--bg-1: #383838;--bg-2: #444} ::-webkit-scrollbar {background: none;width: 10px} ::-webkit-scrollbar-thumb {background: rgba(0, 0, 0, 0.3333333333);border-radius: 5px} body {height: 100vh} body > div {width: 50%;height: 100%;min-width: 300px;overflow-y: auto} body > div.webhook {background: var(--bg-1);padding: 1em} body > div.webhook h1.title {font-family: "Poppins-SemiBold";color: var(--white);padding: 3px 0} body > div.webhook .container {margin-top: 1em;gap: 1em} body > div.webhook .container details {width: 100%;border: 1px solid #222;border-radius: 10px;padding: 0 5px;background: #2c2c2c} body > div.webhook .container details summary {padding: 5px} body > div.webhook .container details summary .title {color: var(--white-2);text-transform: uppercase;font-family: "Poppins-Light";font-size: 1.1rem} body > div.webhook .container details summary .carret {width: 20px;height: 1.1rem;transform: rotate(0);transition: all 0.2s linear} body > div.webhook .container details summary .carret span {position: relative;display: block;width: 12px;height: 3px;background: #555;transform: rotate(135deg);border-radius: 2px;left: 3px} body > div.webhook .container details summary .carret span::after {content: "";display: block;position: relative;top: 5px;left: 5px;width: 12px;height: 3px;background: #555;transform: rotate(90deg);border-radius: 2px} body > div.webhook .container details .content {width: 100%;margin: 2px 0;padding: 5px;color: #ddd;font-family: "SourceSansPro-Regular";font-size: 0.95rem;line-height: 1.1rem} body > div.webhook .container details .content > .input {color: #aaa;padding: 8px 5px 6px;border-radius: 5px;position: relative;margin-top: 8px} body > div.webhook .container details .content > .input label {font-size: 1rem;font-family: "Poppins-Regular";color: rgba(255, 255, 255, 0.8666666667)} body > div.webhook .container details .content > .input input, body > div.webhook .container details .content > .input textarea {border: 1px solid #222;background: #3b3b3b;color: unset;padding: 5px;font-family: "SourceSansPro-Regular"} body > div.webhook .container details .content > .input textarea {resize: vertical;min-height: 4em;height: 10em;max-height: 20em;width: 100%;margin-top: 6px;font-size: 0.9rem} body > div.webhook .container details .content:not(:first-child) {margin-top: 0.7em} body > div.webhook .container details#content .content .input {margin-top: 0} body > div.webhook .container details#embeds ul {background: #f00;list-style: none} body > div.webhook .container details#embeds ul li {background: var(--bg-2)} body > div.webhook .container details#embeds ul li .summary .title .carret {width: 20px;height: 1.1rem;transform: rotate(0);transition: all 0.2s linear;transform: scale(0.6) rotate(-90deg);margin-left: 5px} body > div.webhook .container details#embeds ul li .summary .title .carret span {position: relative;display: block;width: 12px;height: 3px;background: var(--white-2);transform: rotate(135deg);border-radius: 2px;left: 3px} body > div.webhook .container details#embeds ul li .summary .title .carret span::after {content: "";display: block;position: relative;top: 5px;left: 5px;width: 12px;height: 3px;background: var(--white-2);transform: rotate(90deg);border-radius: 2px} body > div.webhook .container details#embeds ul li .summary .remove {width: 20px;height: 20px;filter: invert(95%)} body > div.webhook .container details#embeds ul li .summary .remove img {width: 100%;height: 100%;-o-object-fit: contain;object-fit: contain} body > div.webhook .container details#embeds button {width: 150px;height: 36px;background: #66e;font-size: 0.9rem;font-family: "Poppins-Regular";color: var(--white-2);border-radius: 2px} body > div.webhook .container details[open] {background: #2f2f2f} body > div.webhook .container details[open] summary .carret {transform: rotate(0.5turn)} body > div.preview {background: var(--bg-2);padding: 1em} body > div.preview .avatar {width: 40px;height: 40px;overflow: hidden;border-radius: 50%} body > div.preview .avatar img {width: 100%;height: 100%;-o-object-fit: contain;object-fit: contain} body > div.preview .message {margin-left: 10px;width: calc(100% - 5em)} body > div.preview .message .user {font-family: "Poppins-Medium"} body > div.preview .message .user .username {font-size: 13px;color: var(--white)} body > div.preview .message .user .username .tag {position: relative;top: -2px;width: 30px;background: #66e;border-radius: 2px;padding: 1.5px 2px;font-size: 9px;text-transform: uppercase} body > div.preview .message .user .date {font-size: 10px;color: #888} body > div.preview .message .content {margin-top: 0.2em;width: 100%;height: 40px;font-size: 1rem;color: #eee;font-family: "SourceSansPro-Light"} body > div.preview .message .content .emoji {position: relative;top: 3px;height: 1rem} body > div.preview .message .content > div {margin: 0}`;const encodeImage = (input) => new Promise((resolve, reject) => {if (input.files.length) try {var file = input.files[0];var reader = new FileReader();reader.readAsDataURL(file);reader.onloadend = () => resolve(reader.result);reader.onerror = reject;} catch (err) { reject(err); }});window.addEventListener('load', async function () {this.document.body.innerHTML = body;this.document.body.classList.add('d-flex', 'row', 'wrap');this.document.head.appendChild((function() {let a=document.createElement('style');a.innerText=css;delete body,css;return a})());var data = {};const form = this.document.querySelector('body > .webhook');const preview = this.document.querySelector('body > .preview');var inputs = Array.from(form.querySelectorAll('.input')).concat();preview.querySelector('.avatar img')?.setAttribute('src', `https://cdn.discordapp.com/embed/avatars/${Math.round(Math.random() * 5)}.png`);inputs.forEach(el => {let input = el.querySelector('input'),changeFunc = () => (data = { ...data, [input.name]: input.value });(!input && (input = el.querySelector('textarea')));(input && (input.onchange = changeFunc));changeFunc()});form.onsubmit = e => {e.preventDefault();e.stopPropagation();try {data.date = parseInt(data.date);} catch (error) {data.date = 0;} finally {if (!data.date) data.date = new Date().getTime()}console.table(data)};const updatePreview = () => Object.keys(data).forEach(attr => {let el = preview.querySelector(`.content .${attr}`);switch (attr) {case 'message':el.innerHTML = data[attr].replace(/\n/g, '<br />'); break;default: return;}twemoji.parse(preview)});inputs.forEach(el => el.addEventListener('change', updatePreview));this.addEventListener('keypress', updatePreview);updatePreview()});
